## MQTT与Socket的异同 ##

#### Android端实现消息推送的方式 ####

1. 轮询: 客户端每隔一段时间向服务器发送请求，获取服务器的数据。缺点：费电、费流量。
2. 短信方式：服务器向客户端发送短信，手机收到短信时，客户端拦截短信并将其中的内容获取出来。缺点：短信贵且可能被安全软件提前拦截。
3. 持久连接（Push）方式：客户端和服务器之间建立长久连接。
&emsp;- Google的C2DM。国内大多数用户无法使用
&emsp;- XMPP（可扩展通讯和表示协议）是基于可扩展标记语言的协议。androidpn是一个基于XMPP协议的java开源Android push notification实现。它包含了完整的客户端和服务器端。
&emsp;- Socket采用传输层TCP/UDP协议来实现的一个数据请求连接，客户端拥有clientSocket，服务器拥有serverSocket，并且他们互相之间持有对方的IP信息以及端口信息，这样就可以实现消息推送以及保持连接的网络连接了。
&emsp;- MQTT是一个轻量级的消息发布/订阅协议，它是实现基于手机客户端的消息推送服务器的理想解决方案。

MQTT协议，客户机较小并且MQTT协议高效的使用网络带宽，在这个意义上，其为轻量级。MQTT协议支持可靠的传送和即发即弃的传输。在此协议中，消息传送与应用程序脱离。脱离应用程序的程度取决于写入MQTT客户机和MQTT服务器的方式。脱离式传送能够将应用程序从任何服务器连接和等待消息中解脱出来。交互模式与电子邮件相似，但在应用程序编程方面进行了优化。

协议具有许多不同的功能：

- 它是一种发布/预订协议
- 除提供一对多消息分发外，发布/预定也脱离了应用程序。对于具有多个客户机的应用程序来说，这些功能非常有用。
- 它与消息内容没有任何关系。
- 他通过TCP/IP运行，TCP/IP可以提供基本网络连接。
- 他针对消息传送提供三种服务质量：
	- “至多一种”
	&emsp;消息根据底层因特网协议网络尽量大努力进行传递。可能会丢失消息。
	- “至少一次”
	&emsp;保证消息抵达，但可能会出现重复。
	- “刚好一次”
	&emsp;确保只收到一次消息。

- 它是一种管理网络中消息流的经济方式。
- 它具有一种“遗嘱”功能，该功能通知订户客户机从MQTT服务器异常断开连接。